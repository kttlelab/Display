(this.webpackJsonpdisplay=this.webpackJsonpdisplay||[]).push([[0],{36:function(e,t,a){e.exports=a.p+"static/media/cloud.6371448b.svg"},40:function(e,t,a){e.exports=a(98)},85:function(e,t,a){},96:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);a(41);var n=a(1),r=a.n(n),o=a(8),i=a.n(o),c=a(9),s=a.n(c),u=a(13),l=a(15),d=a(25),p=a(24),m=a.n(p),f=a(35),h=a.n(f),b=(a(85),a(36)),v=a.n(b),y=a(37),g=a(38),w=a(19),x={apiKey:"AIzaSyDDDlQuhV1umenGHFK34ZoG4Ob7s3c3oW0",authDomain:"ride-my-way-production.firebaseapp.com",databaseURL:"https://ride-my-way-production.firebaseio.com",projectId:"ride-my-way-production",storageBucket:"ride-my-way-production.appspot.com",messagingSenderId:"403153167805",appId:"1:403153167805:web:16f3a010be3e6a58509ed4",measurementId:"G-0T0VPJ35ZF"},j=new(function(){function e(){Object(y.a)(this,e),this.initializeApp(),this.database=Object(w.firestore)()}return Object(g.a)(e,[{key:"initializeApp",value:function(){w.apps.length||Object(w.initializeApp)(x)}},{key:"getDocument",value:function(){var e=Object(l.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.database.collection(t).doc(a).get();case 3:if(!(n=e.sent).exists){e.next=6;break}return e.abrupt("return",Promise.resolve(n.data()));case 6:return e.abrupt("return",Promise.resolve(null));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getCollection",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n,r,o,i,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},n=a.value,r=void 0===n?"":n,e.prev=1,e.next=4,this.database.collection(t).get();case 4:return o=e.sent,i=[],o.forEach((function(e){i.push(Object(u.a)(Object(u.a)({},e.data()),{},{key:e.id}))})),e.abrupt("return",i.filter((function(e){return e.route&&e.route.includes(r)})));case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()),O={latitude:-1.943378,longitude:30.057301},E=function(e,t){var a=1e3*e/336;return t&&(a=Math.abs(a-t.props.distance)),a>60?"".concat(Number(a/60).toFixed(0)," H"):Number(a)>=1?"".concat(a.toFixed(0)," Min"):"Almost here"},k=[{dataField:"bus",text:"BUS",sort:!0},{dataField:"route",text:"ROUTE",sort:!0},{dataField:"estimation",text:"NEXT BUS ARRIVES IN",sort:!0}],I=function(){var e=Object(n.useState)(m()().format("HH:mm:ss")),t=Object(d.a)(e,2),a=t[0],o=t[1];setInterval((function(){return o(m()().format("HH:mm:ss"))}),1e3);var i=Object(n.useState)([]),c=Object(d.a)(i,2),p=c[0],f=c[1],b=function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getCollection("vehicles",{value:""});case 2:t=e.sent,a=t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{estimation:E((a=O,n={latitude:e.latitude,longitude:e.longitude},t=Math.sqrt(Math.pow(a.latitude-n.latitude,2)+Math.pow(a.longitude-n.longitude,2)),(100*Number(t)).toFixed(2)/.5))});var t,a,n})),f(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(b,[]);var y=p.length/2;return r.a.createElement("div",{className:"app",style:{display:"flex",justifyContent:"center",flexDirection:"column"}},r.a.createElement("div",{className:"flex horizontal",style:{justifyContent:"space-between",marginBottom:"2vh"}},r.a.createElement("h1",null,"ARRIVALS"),r.a.createElement("div",{className:"flex horizontal"},r.a.createElement("img",{src:v.a,alt:"logo"}),r.a.createElement("h1",null,"28\xb0C")),r.a.createElement("h1",{style:{color:"red"}},a)),r.a.createElement("div",{className:"flex horizontal",style:{justifyContent:"space-between"}},[p.slice(0,Math.ceil(y)),p.slice(-Math.floor(y))].map((function(e,t){return r.a.createElement(h.a,{key:Number(t),striped:!0,hover:!0,rowStyle:{textAlign:"center"},keyField:"bus",data:e,columns:k})}))))};a(96),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.f65adba2.chunk.js.map